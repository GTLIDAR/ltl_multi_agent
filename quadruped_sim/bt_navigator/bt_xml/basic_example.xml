<?xml version="1.0"?>
<root main_tree_to_execute="BehaviorTree">
    <!-- ////////// -->
    <BehaviorTree ID="BehaviorTree">
        <Sequence>
            <SetBlackboard output_key="Home_coord" value="0.0;0.0;0.0;1.0"/>
            <SetBlackboard output_key="Rm_1_coord" value="3.0;-3.0;4.71;1.0"/>
            <SetBlackboard output_key="Rm_2_coord" value="-8.0;1.0;3.14;1.0"/>
            <SetBlackboard output_key="Rm_3_coord" value="0.0;5.0;0.0;1.0"/>
            
            <SetBlackboard output_key="Rm_1_cmplt" value="false"/>
            <SetBlackboard output_key="Rm_2_cmplt" value="false"/>
            <SetBlackboard output_key="Rm_3_cmplt" value="false"/>
        
            <Action ID="MoveBase" goal="{Home_coord}"/>
            <Action ID="Speak" get_message="Reached home coordinate. About to begin disinfection task"/>

            <Fallback>
                <Condition ID="IsRmCmplt" get_rm_cmplt="{Rm_1_cmplt}" get_rm_num="1"/>
                <Action ID="MoveBase" goal="{Rm_1_coord}"/>
                <Action ID="Spray" set_sprayed="{Rm_1_cmplt}"/>
            </Fallback>
            
            <Fallback>
                <Condition ID="IsRmCmplt" get_rm_cmplt="{Rm_2_cmplt}" get_rm_num="2"/>
                <Action ID="MoveBase" goal="{Rm_2_coord}"/>
                <Action ID="Spray" set_sprayed="{Rm_2_cmplt}"/>
            </Fallback>
            
            <Fallback>
                <Condition ID="IsRmCmplt" get_rm_cmplt="{Rm_3_cmplt}" get_rm_num="3"/>
                <Action ID="MoveBase" goal="{Rm_3_coord}"/>
                <Action ID="Spray" set_sprayed="{Rm_3_cmplt}"/>
            </Fallback>
            
            <Fallback>
                <Action ID="MoveBase" goal="{Home_coord}"/>
                <Action ID="Speak" get_message="Finished disinfection"/>
            </Fallback>
        </Sequence>
    </BehaviorTree>
    <!-- ////////// -->
    <TreeNodesModel>
        <Condition ID="IsRmCmplt">
            <input_port name="get_rm_cmplt"/>
            <input_port default="1" name="get_rm_num"/>
        </Condition>
        <Action ID="MoveBase">
            <input_port name="goal"/>
        </Action>
        <Action ID="Speak">
            <input_port default="Start disinfection" name="get_message"/>
        </Action>
        <Action ID="Spray">
            <input_port name="set_sprayed"/>
        </Action>
    </TreeNodesModel>
    <!-- ////////// -->
</root>